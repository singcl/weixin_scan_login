<html lang='en'>

<head>
    <meta charset='UTF-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <script src='/js/lib/tailwind.min.js'></script>
    <script type='importmap'>
      { "imports": { "vue": "/js/vue/vue3.esm-browser.js" } }
    </script>
    <title>登录</title>
</head>

<body>
    <div id='app'></div>
    <script type="module">
        import { createApp, defineComponent, h, onMounted, reactive } from 'vue';
        const App = defineComponent((props, { emit }) => {
            //
            onMounted(() => {
                getQrcodeInfo()
            })
            const qrcodeInfo = reactive({ info: {} });
            //
            async function getQrcodeInfo() {
                const response = await fetch('/mp/qrcode');
                const data = await response.json();
                qrcodeInfo.info = data;
            }

            return () => h('div', { class: 'flex flex-col justify-center items-center h-full' }, [
                h('h3', ['登录']),
                h('img', { src: qrcodeInfo.info.url, alt="登录二维码" class: 'max-w-xs max-h-xs' })
            ])
        })
        createApp(App).mount('#app');
    </script>
</body>

</html>